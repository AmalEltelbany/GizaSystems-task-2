<mxfile host="65bd71144e">
    <diagram name="CI/CD Pipeline" id="cicd-pipeline">
        <mxGraphModel dx="1497" dy="903" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1150" pageHeight="700" background="light-dark(#CCCCFF,#121212)" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="title" value="DevOps CI/CD Pipeline - PetClinic Deployment with Nagios Monitoring" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=22;fontStyle=1;fontColor=#1a1a1a;" parent="1" vertex="1">
                    <mxGeometry x="300" y="20" width="700" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="developer-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="40" y="120" width="100" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="developer-icon" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://cdn-icons-png.flaticon.com/512/1077/1077012.png;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="60" y="130" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="developer-label" value="User" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="50" y="195" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="jenkins-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#F57C00;strokeWidth=3;" parent="1" vertex="1">
                    <mxGeometry x="200" y="90" width="220" height="320" as="geometry"/>
                </mxCell>
                <mxCell id="jenkins-icon" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://www.jenkins.io/images/logos/jenkins/jenkins.png;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="270" y="100" width="70" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="jenkins-title" value="JENKINS&#xa;Port 8080" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1;fontColor=#E65100;" parent="1" vertex="1">
                    <mxGeometry x="240" y="175" width="130" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="jenkinsfile" value="Jenkinsfile" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFECB3;strokeColor=#FF8F00;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="230" y="210" width="150" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="stage1" value="Stage 1: Build &amp; Deploy&#xa;ansible-playbook petclinic.yml" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="220" y="245" width="170" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="stage2" value="Stage 2: Verify Deployment&#xa;curl localhost:9090/petclinic" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="220" y="295" width="170" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="stage3" value="Stage 3: Verify Monitoring&#xa;check_http / check_tcp" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="220" y="345" width="170" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="arrow1" value="Click&#xa;Build" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#1976D2;fontStyle=1;fontSize=10;" parent="1" source="developer-box" target="jenkins-box" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="ansible-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#388E3C;strokeWidth=3;" parent="1" vertex="1">
                    <mxGeometry x="500" y="90" width="240" height="320" as="geometry"/>
                </mxCell>
                <mxCell id="ansible-icon" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://logos-download.com/wp-content/uploads/2016/10/Ansible_logo.png;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="575" y="100" width="70" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="ansible-title" value="ANSIBLE" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1;fontColor=#2E7D32;" parent="1" vertex="1">
                    <mxGeometry x="560" y="175" width="100" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="petclinic-role" value="petclinic role:&#xa;• Download source from GitHub&#xa;• Create ServletInitializer.java&#xa;• Add WAR packaging to pom.xml&#xa;• Build with Maven&#xa;• Copy WAR to Tomcat webapps" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=left;spacingLeft=8;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="515" y="205" width="210" height="95" as="geometry"/>
                </mxCell>
                <mxCell id="nagios-role" value="nagios role:&#xa;• tomcat_commands.cfg&#xa;• tomcat_host.cfg&#xa;• Configure check_http/check_tcp" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;align=left;spacingLeft=8;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="515" y="310" width="210" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="arrow2" value="ansible-playbook" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#388E3C;fontStyle=1;fontSize=10;" parent="1" source="stage1" target="ansible-box" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="tomcat-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;strokeWidth=3;" parent="1" vertex="1">
                    <mxGeometry x="820" y="90" width="200" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="tomcat-icon" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://tomcat.apache.org/res/images/tomcat.png;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="880" y="100" width="70" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="tomcat-title" value="TOMCAT&#xa;Port 9090" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1;fontColor=#B71C1C;" parent="1" vertex="1">
                    <mxGeometry x="860" y="175" width="110" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="tomcat-config" value="server.xml (port)&#xa;tomcat-users.xml (admin)&#xa;context.xml (access)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;fontSize=10;" parent="1" vertex="1">
                    <mxGeometry x="835" y="210" width="170" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="war-file" value="petclinic.war" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CE93D8;strokeColor=#7B1FA2;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="870" y="265" width="90" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="arrow3" value="Deploy&#xa;WAR" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#C62828;fontStyle=1;fontSize=10;" parent="1" source="petclinic-role" target="tomcat-box" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="nagios-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=3;" parent="1" vertex="1">
                    <mxGeometry x="820" y="320" width="200" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="nagios-icon" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://assets.nagios.com/images/marketing/logos/nagioscore-logo.png;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="880" y="330" width="70" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="nagios-title" value="NAGIOS CORE&#xa;localhost/nagios4/" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1;fontColor=#6A1B9A;" parent="1" vertex="1">
                    <mxGeometry x="850" y="385" width="130" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="nagios-plugins" value="Real Plugins:&#xa;✓ check_http&#xa;✓ check_tcp" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#666666;fontSize=11;align=left;spacingLeft=8;" parent="1" vertex="1">
                    <mxGeometry x="845" y="440" width="150" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="arrow4" value="Configure" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#7B1FA2;fontStyle=1;fontSize=10;" parent="1" source="nagios-role" target="nagios-box" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arrow5" value="Monitor&#xa;24/7" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#7B1FA2;dashed=1;dashPattern=8 8;fontStyle=1;fontSize=10;" parent="1" source="nagios-box" target="tomcat-box" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1070" y="410"/>
                            <mxPoint x="1070" y="190"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="maven-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C2185B;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="500" y="420" width="100" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="maven-icon" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://maven.apache.org/images/maven-logo-black-on-white.png;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="515" y="430" width="70" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="maven-label" value="MAVEN&#xa;Build Tool" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="515" y="475" width="70" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="java-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1565C0;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="620" y="420" width="100" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="java-icon" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://www.oracle.com/a/ocom/img/cb71-java-logo.png;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="640" y="430" width="50" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="java-label" value="JAVA 17&#xa;Runtime" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="635" y="475" width="70" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="vars-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F7FA;strokeColor=#00838F;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="40" y="280" width="130" height="230" as="geometry"/>
                </mxCell>
                <mxCell id="vars-title" value="group_vars/all.yml" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=11;fontStyle=1;fontColor=#006064;" parent="1" vertex="1">
                    <mxGeometry x="45" y="285" width="120" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="vars-content" value="tomcat_port: 9090&#xa;jenkins_port: 8080&#xa;java_home: /home/...&#xa;tomcat_home: /home/...&#xa;nagios_core_etc:&#xa;  /etc/nagios4&#xa;nagios_core_plugins:&#xa;  /usr/lib/nagios/plugins" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=9;spacingLeft=5;" parent="1" vertex="1">
                    <mxGeometry x="45" y="310" width="120" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="important-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="40" y="530" width="400" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="important-title" value="&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;CONFIGURATION" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=11;fontStyle=1;fontColor=#E65100;spacingLeft=10;" parent="1" vertex="1">
                    <mxGeometry x="130" y="535" width="200" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="important-content" value="• ServletInitializer.java → Allows Spring Boot to run as WAR in Tomcat&#xa;• JENKINS_NODE_COOKIE=dontKillMe → Prevents Jenkins from killing Tomcat after pipeline&#xa;• become: yes → Required for Nagios config (needs sudo)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=9;spacingLeft=10;" parent="1" vertex="1">
                    <mxGeometry x="45" y="555" width="390" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="web-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3949AB;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="460" y="530" width="280" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="web-title" value="&amp;nbsp;WEB ACCESS" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=11;fontStyle=1;fontColor=#283593;spacingLeft=10;" parent="1" vertex="1">
                    <mxGeometry x="535" y="535" width="150" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="web-content" value="• Jenkins: http://localhost:8080&#xa;• PetClinic: http://localhost:9090/petclinic/&#xa;• Nagios: http://localhost/nagios4/" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;spacingLeft=10;" parent="1" vertex="1">
                    <mxGeometry x="465" y="555" width="270" height="45" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>